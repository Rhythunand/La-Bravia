<!DOCTYPE html>
<html lang="en" class="scroll-smooth" x-data="laBraviaApp()" :class="{ 'dark': darkMode }">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover">
    
    <title>La Bravia | Olfactory Portraits</title>
    <meta name="description" content="Artisanal fragrances crafted with poetic restraint. Silence is the ultimate luxury.">
    
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Cinzel:wght@400;500&family=Cormorant+Garamond:ital,wght@0,300;0,400;1,300;1,400&family=Inter:wght@200;300;400&display=swap" rel="stylesheet">
    
    <script src="https://cdn.tailwindcss.com"></script>
    
    <script defer src="https://cdn.jsdelivr.net/npm/alpinejs@3.13.3/dist/cdn.min.js"></script>
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.5/gsap.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.5/ScrollTrigger.min.js"></script>

    <script>
        tailwind.config = {
            darkMode: 'class',
            theme: {
                extend: {
                    colors: {
                        luxury: {
                            gold: '#C5A059',
                            dark: '#0A0A0A',
                            paper: '#FDFDFB',
                            offWhite: '#F5F5F0',
                            stone: '#727272',
                            canvas: '#F5F2ED',
                            night: '#0F0F0F',
                            obsidian: '#141414',
                        }
                    },
                    fontFamily: {
                        display: ['Cinzel', 'serif'],
                        serif: ['Cormorant Garamond', 'serif'],
                        sans: ['Inter', 'sans-serif'],
                    },
                    letterSpacing: {
                        luxury: '0.35em',
                        hero: '0.6em',
                    }
                }
            }
        }
    </script>

    <style>
        [x-cloak] { display: none !important; }
    
        body {
            -webkit-font-smoothing: antialiased;
            text-rendering: optimizeLegibility;
            transition: background-color 1.2s cubic-bezier(0.4, 0, 0.2, 1), color 1.2s cubic-bezier(0.4, 0, 0.2, 1);
        }
    
        /* Film Grain Overlay */
        .grain::after {
            content: "";
            position: fixed;
            top: -150%; left: -150%; width: 300%; height: 300%;
            background-image: url("https://upload.wikimedia.org/wikipedia/commons/5/5c/Image_with_noise_example.png");
            opacity: 0.035;
            pointer-events: none;
            z-index: 999;
            animation: grain 8s steps(10) infinite;
        }
    
        @keyframes grain {
            0%, 100% { transform: translate(0, 0); }
            10% { transform: translate(-5%, -10%); }
            30% { transform: translate(-15%, 5%); }
            50% { transform: translate(-5%, 15%); }
            70% { transform: translate(0, 10%); }
            90% { transform: translate(-10%, 5%); }
        }
    
        .no-scroll { overflow: hidden !important; }
    
        /* GSAP initial states */
        .hero-text, .reveal-on-scroll, .modal-content {
            opacity: 0;
        }
    
        /* Theme toggle – no background */
        .theme-toggle {
            background: transparent !important;
            border: none !important;
            padding: 0.5rem !important;
        }
    
        .theme-toggle svg {
            background: transparent !important;
        }
    
        /* Clean inputs – mode-aware text color */
        input, textarea {
            background: transparent;
            border: none;
            border-bottom: 1px solid #727272;
            border-radius: 0;
            padding: 12px 0;
            font-family: 'Cormorant Garamond', serif;
            letter-spacing: 0.05em;
            transition: border-color 0.3s ease;
        }
    
        /* Light mode: dark text */
        input:not(.dark input), textarea:not(.dark textarea) {
            color: #0A0A0A;
        }
    
        /* Dark mode: offWhite text */
        .dark input, .dark textarea {
            color: #F5F5F0;
        }
    
        /* Placeholder */
        input::placeholder, textarea::placeholder {
            color: #727272;
            opacity: 0.7;
        }
    
        /* Gold focus */
        input:focus, textarea:focus {
            border-bottom-color: #C5A059;
            box-shadow: 0 1px 0 0 #C5A059;
            outline: none;
        }

        /* Add to <style> in collection.html */
        .product-card {
            transition: transform 0.6s cubic-bezier(0.4, 0, 0.2, 1);
        }
        
        .product-card:hover {
            transform: translateY(-4px);  /* Subtle lift */
        }
        
        .product-card h4 {
            transition: letter-spacing 0.5s cubic-bezier(0.4, 0, 0.2, 1),
                        color 0.5s ease;
        }
        
        .product-card:hover h4 {
            letter-spacing: 0.08em;  /* Expands slightly */
            color: #C5A059;  /* Gold tint */
        }
        
        /* Price should subtly emphasize */
        .product-card .price-tag {
            transition: transform 0.5s cubic-bezier(0.4, 0, 0.2, 1);
        }
        
        .product-card:hover .price-tag {
            transform: translateX(2px);
        }

        /* Add to both files' <style> blocks: */
        :root {
            --gold-primary: #C5A059;
            --gold-emphasis: rgba(197, 160, 89, 0.9);
            --gold-subtle: rgba(197, 160, 89, 0.6);
            --gold-whisper: rgba(197, 160, 89, 0.15);
        }
        
        /* Replace scattered opacity values with variables */
        .text-luxury-gold { color: var(--gold-primary); }
        .border-luxury-gold { border-color: var(--gold-primary); }
        .hover\:text-luxury-gold:hover { color: var(--gold-emphasis); }

        /* Add to both files — shared button DNA */
        .btn-primary {
            padding: 1.5rem 3.5rem;
            border: 1px solid rgba(255,255,255,0.15);
            background: transparent;
            color: white;
            font-size: 9px;
            letter-spacing: 0.4em;
            text-transform: uppercase;
            cursor: pointer;
            transition: all 0.8s cubic-bezier(0.4, 0, 0.2, 1);
            backdrop-filter: blur(8px);
        }
        
        .btn-primary:hover {
            border-color: var(--gold-primary);
            letter-spacing: 0.5em;
            transform: translateY(-2px);
        }
        
        .btn-primary:active {
            transform: translateY(0);
        }

    </style>
</head>
<script>
if (window.innerWidth > 1024) {
    const cursor = document.createElement('div');
    cursor.className = 'custom-cursor';
    cursor.style.cssText = `
        position: fixed;
        width: 8px;
        height: 8px;
        border-radius: 50%;
        background: #C5A059;
        pointer-events: none;
        z-index: 9999;
        opacity: 0;
        transition: opacity 0.3s ease;
    `;
    document.body.appendChild(cursor);

    let mouseX = 0, mouseY = 0;
    let cursorX = 0, cursorY = 0;

    document.addEventListener('mousemove', (e) => {
        mouseX = e.clientX;
        mouseY = e.clientY;
        cursor.style.opacity = '0.6';
    });

    function animateCursor() {
        cursorX += (mouseX - cursorX) * 0.15;
        cursorY += (mouseY - cursorY) * 0.15;
        cursor.style.left = cursorX + 'px';
        cursor.style.top = cursorY + 'px';
        requestAnimationFrame(animateCursor);
    }
    animateCursor();
}
</script>
<body class="bg-luxury-paper dark:bg-luxury-night text-luxury-dark dark:text-luxury-offWhite selection:bg-luxury-gold/30 grain">

    <div x-show="mobileMenu" 
         x-transition:enter="transition ease-out duration-700"
         x-transition:enter-start="opacity-0 translate-y-full"
         x-transition:enter-end="opacity-100 translate-y-0"
         x-transition:leave="transition ease-in duration-500"
         x-transition:leave-start="opacity-100 translate-y-0"
         x-transition:leave-end="opacity-0 translate-y-full"
         class="fixed inset-0 z-[150] bg-luxury-paper dark:bg-luxury-night flex flex-col justify-center items-center text-center p-6" x-cloak>
        
        <button @click="closeMenu()" class="absolute top-8 right-8 p-4 text-luxury-stone hover:text-luxury-gold transition-colors">
            <svg class="w-8 h-8" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="1" d="M6 18L18 6M6 6l12 12"/></svg>
        </button>

        <!-- Replace <nav> block in collection.html with: -->
        <nav class="fixed w-full z-[100] transition-all duration-[1.2s] ease-out"
             :class="scrolled ? 'bg-white/70 dark:bg-luxury-night/70 backdrop-blur-2xl py-6 border-b border-black/3 dark:border-white/3' : 'bg-transparent py-10 md:py-16'"
             role="navigation">
            <div class="max-w-[1800px] mx-auto px-10 md:px-20 flex justify-between items-center">
                
                <a href="#" class="text-xl md:text-2xl font-display tracking-[0.5em] uppercase hover:tracking-[0.6em] transition-all duration-700 ease-out opacity-90 hover:opacity-100">
                    La Bravia
                </a>
                
                <div class="flex items-center space-x-16 md:space-x-24">
                    <div class="hidden md:flex space-x-20 text-[9px] uppercase tracking-[0.4em] font-medium">
                        <a href="#collection" class="relative group py-1">
                            Collection
                            <span class="absolute -bottom-1 left-0 w-0 h-[0.5px] bg-luxury-gold transition-all duration-[0.9s] ease-out group-hover:w-full"></span>
                        </a>
                        <a href="#about" class="relative group py-1">
                            The Maison
                            <span class="absolute -bottom-1 left-0 w-0 h-[0.5px] bg-luxury-gold transition-all duration-[0.9s] ease-out group-hover:w-full"></span>
                        </a>
                        <a href="#contact" class="relative group py-1">
                            Concierge
                            <span class="absolute -bottom-1 left-0 w-0 h-[0.5px] bg-luxury-gold transition-all duration-[0.9s] ease-out group-hover:w-full"></span>
                        </a>
                    </div>
        
                    <!-- Theme toggle remains clean -->
                    <button @click="toggleTheme()"
                            class="theme-toggle hidden md:flex items-center justify-center p-3 hover:opacity-60 transition-all duration-700 group"
                            aria-label="Toggle dark/light mode">
                        <svg x-show="!darkMode" x-cloak class="w-5 h-5 text-luxury-dark group-hover:text-luxury-gold transition-colors duration-500" fill="currentColor" viewBox="0 0 20 20">
                            <path d="M17.293 13.293A8 8 0 016.707 2.707a8.001 8.001 0 1010.586 10.586z" />
                        </svg>
                        <svg x-show="darkMode" x-cloak class="w-5 h-5 text-luxury-gold group-hover:text-luxury-offWhite transition-colors duration-500" fill="currentColor" viewBox="0 0 20 20">
                            <path d="M10 2a1 1 0 011 1v1a1 1 0 11-2 0V3a1 1 0 011-1zm4 8a4 4 0 11-8 0 4 4 0 018 0z..." />
                        </svg>
                    </button>
        
                    <!-- Mobile menu trigger -->
                    <button @click="openMenu()" class="md:hidden flex flex-col space-y-2 group">
                        <span class="w-8 h-[0.5px] bg-current transition-all duration-500 group-hover:w-10"></span>
                        <span class="w-5 h-[0.5px] bg-current self-end transition-all duration-500 group-hover:w-8"></span>
                    </button>
                </div>
            </div>
        </nav>

        <div class="mt-20">
            <button @click="toggleTheme()"
                    class="theme-toggle flex items-center justify-center px-6 py-3 border border-luxury-gold/30 rounded-full hover:border-luxury-gold/60 transition-all">
                <svg x-show="!darkMode" x-cloak class="w-5 h-5 text-luxury-gold mr-2" fill="currentColor" viewBox="0 0 20 20">
                    <path d="M17.293 13.293A8 8 0 016.707 2.707a8.001 8.001 0 1010.586 10.586z" />
                </svg>
                <svg x-show="darkMode" x-cloak class="w-5 h-5 text-luxury-gold mr-2" fill="currentColor" viewBox="0 0 20 20">
                    <path d="M10 2a1 1 0 011 1v1a1 1 0 11-2 0V3a1 1 0 011-1zm4 8a4 4 0 11-8 0 4 4 0 018 0z..." />
                </svg>
                <span class="text-sm uppercase tracking-luxury text-luxury-gold"
                      x-text="darkMode ? 'Light' : 'Dark'"></span>
            </button>
        </div>
    </div>

    <header>
        <nav class="fixed w-full z-[100] transition-all duration-1000"
             :class="scrolled ? 'bg-white/80 dark:bg-luxury-night/80 backdrop-blur-xl py-4 border-b border-black/5 dark:border-white/5' : 'bg-transparent py-8 md:py-12'"
             role="navigation">
            <div class="max-w-[1700px] mx-auto px-8 md:px-16 flex justify-between items-center">
                
                <a href="#" class="text-xl md:text-2xl font-display tracking-hero uppercase hover:opacity-60 transition-opacity z-50 relative">
                    La Bravia
                </a>
                
                <div class="flex items-center space-x-12 md:space-x-20 z-50 relative">
                    <div class="hidden md:flex space-x-16 text-[9px] uppercase tracking-luxury font-medium">
                        <a href="#collection" class="relative group">
                            Collection
                            <span class="absolute -bottom-2 left-0 w-0 h-[1px] bg-luxury-gold transition-all duration-700 group-hover:w-full"></span>
                        </a>
                        <a href="#about" class="relative group">
                            The Maison
                            <span class="absolute -bottom-2 left-0 w-0 h-[1px] bg-luxury-gold transition-all duration-700 group-hover:w-full"></span>
                        </a>
                        <a href="#contact" class="relative group">
                            Concierge
                            <span class="absolute -bottom-2 left-0 w-0 h-[1px] bg-luxury-gold transition-all duration-700 group-hover:w-full"></span>
                        </a>
                    </div>

                    <button @click="toggleTheme()"
                            class="theme-toggle hidden md:flex items-center justify-center p-2 hover:opacity-70 transition-all duration-500 group"
                            aria-label="Toggle dark/light mode">
                        <svg x-show="!darkMode" x-cloak class="w-5 h-5 text-luxury-dark group-hover:text-luxury-gold transition-colors" fill="currentColor" viewBox="0 0 20 20">
                            <path d="M17.293 13.293A8 8 0 016.707 2.707a8.001 8.001 0 1010.586 10.586z" />
                        </svg>
                        <svg x-show="darkMode" x-cloak class="w-5 h-5 text-luxury-gold group-hover:text-luxury-dark transition-colors" fill="currentColor" viewBox="0 0 20 20">
                            <path d="M10 2a1 1 0 011 1v1a1 1 0 11-2 0V3a1 1 0 011-1zm4 8a4 4 0 11-8 0 4 4 0 018 0z..." />
                        </svg>
                    </button>

                    <button @click="openMenu()" class="md:hidden flex flex-col space-y-2">
                        <span class="w-8 h-[1px] bg-current"></span>
                        <span class="w-5 h-[1px] bg-current self-end"></span>
                    </button>
                </div>
            </div>
        </nav>
        <!-- Add to collection.html after nav -->
        <div class="fixed top-0 left-0 w-full h-[1px] bg-luxury-gold/20 z-[101]">
            <div x-ref="scrollBar" class="h-full bg-luxury-gold transition-all duration-100" style="width: 0%"></div>
        </div>
        
        <script>
        // In laBraviaApp() init():
        window.addEventListener('scroll', () => {
            const scrollPercent = (window.scrollY / (document.documentElement.scrollHeight - window.innerHeight)) * 100;
            this.$refs.scrollBar.style.width = scrollPercent + '%';
        });
        </script>
    </header>

    <main>
        <section class="relative h-[100svh] flex items-center justify-center overflow-hidden bg-transparent">
            <div class="absolute inset-0 z-0">
                <img src="https://images.unsplash.com/photo-1592945403244-b3fbafd7f539?auto=format&fit=crop&q=80&w=2000" 
                     alt="Ethereal scent visualization" 
                     class="hero-bg w-full h-full object-cover opacity-60 blur-[1px]"
                     decoding="async">
                <div class="absolute inset-0 bg-gradient-to-b from-black/40 via-transparent to-luxury-night"></div>
            </div>
            
            <div class="relative z-10 text-center px-8 max-w-5xl mx-auto">  <!-- Add max-w -->
                <p class="hero-text text-[10px] uppercase tracking-[0.8em] mb-10 text-luxury-gold">
                    Olfactory Portrait No. 01
                </p>
                <h1 class="hero-text text-6xl md:text-[9rem] lg:text-[11rem] font-display mb-12 text-white tracking-[0.5em] leading-[0.85]">
                    SILENCE
                </h1>
                <p class="hero-text text-base md:text-xl font-serif italic text-white/60 mb-20 max-w-xl mx-auto leading-relaxed">
                    Fragrance as a vessel for memory.<br>Hand-poured in poetic restraint.
                </p>
                <div class="hero-text">
                    <a href="#collection" class="inline-block px-14 py-6 border border-white/20 text-white uppercase text-[9px] tracking-luxury hover:bg-white hover:text-black transition-all duration-1000 backdrop-blur-sm">
                        Enter Collection
                    </a>
                </div>
            </div>
        </section>

        <section id="collection" class="py-32 md:py-64 px-8 md:px-16 max-w-[1700px] mx-auto min-h-screen">
            <div class="reveal-on-scroll flex flex-col md:flex-row md:items-end justify-between mb-24 md:mb-40 space-y-8">
                <div>
                    <span class="text-[10px] uppercase tracking-luxury text-luxury-gold mb-6 block">The Current Anthology</span>
                    <h3 class="font-display text-4xl md:text-7xl uppercase tracking-tighter leading-tight">
                        Selected <span class="italic font-serif normal-case text-luxury-gold">Movements</span>
                    </h3>
                </div>
                <p class="max-w-xs text-xs uppercase tracking-widest text-luxury-stone leading-loose">
                    Naturally derived. Refillable flacons. Hand-blended in small ateliers.
                </p>
            </div>

            <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-x-20 gap-y-24 md:gap-y-48">
                <template x-for="product in products" :key="product.id">
                    <!-- Replace the product article block in collection.html with: -->
                    <article class="product-card group cursor-pointer" @click="openProduct(product)"
                             x-data="{ hover: false }" @mouseenter="hover = true" @mouseleave="hover = false">
                        <div class="aspect-[3/4] mb-12 relative overflow-hidden bg-luxury-canvas dark:bg-luxury-obsidian">
                            <img :src="product.image" 
                                 :alt="product.name" 
                                 class="w-full h-full object-cover grayscale-[0.7] transition-all duration-[2s] ease-out group-hover:scale-[1.03] group-hover:grayscale-0"
                                 loading="lazy">
                            <div class="absolute inset-0 bg-black/0 dark:bg-white/0 group-hover:bg-black/5 dark:group-hover:bg-white/5 transition-all duration-[1.5s]"></div>
                        </div>
                        <div class="space-y-3">
                            <div class="flex justify-between items-start mb-4">
                                <div class="space-y-1">
                                    <h4 class="font-display text-2xl tracking-wide uppercase" x-text="product.name"></h4>
                                    <p class="text-[9px] uppercase tracking-[0.4em] text-luxury-gold opacity-80" x-text="product.category"></p>
                                </div>
                            </div>
                            <div class="pt-4 border-t border-black/5 dark:border-white/5">
                                <p class="text-luxury-stone font-serif text-xl italic tracking-wide" x-text="'€' + product.price"></p>
                            </div>
                        </div>
                    </article>
                </template>
            </div>
        </section>

        <section id="about" class="bg-luxury-canvas dark:bg-luxury-obsidian py-32 md:py-64 px-8 md:px-16 overflow-hidden">
            <div class="max-w-7xl mx-auto grid lg:grid-cols-12 gap-24 items-center">
                <div class="reveal-on-scroll lg:col-span-6 space-y-12 order-2 lg:order-1">
                    <span class="text-[10px] uppercase tracking-luxury text-luxury-gold font-bold">The Vision</span>
                    <h3 class="font-display text-4xl md:text-6xl uppercase tracking-tighter leading-tight">
                        Permanence over <span class="italic font-serif text-luxury-stone normal-case">Trends</span>
                    </h3>
                    <div class="space-y-8 font-serif text-xl md:text-3xl italic text-luxury-dark/80 dark:text-luxury-offWhite/70 leading-relaxed">
                        <p>"We do not seek to decorate the skin."</p>
                        <p>"We seek to anchor the soul in a singular moment of clarity."</p>
                    </div>
                    <div class="pt-12 border-t border-black/5 dark:border-white/10 grid grid-cols-2 gap-8">
                        <div>
                            <span class="font-display text-[10px] tracking-luxury uppercase block mb-2">Aijaz & Rhythunand</span>
                            <p class="text-[10px] uppercase tracking-widest text-luxury-stone">Founding Perfumers</p>
                        </div>
                        <div class="text-[10px] uppercase tracking-widest text-luxury-stone leading-relaxed">
                            Exclusively distributed to connoisseurs. Inquiries answered within 24 hours.
                        </div>
                    </div>
                </div>
                <div class="lg:col-span-6 order-1 lg:order-2 parallax-container relative h-full">
                    <div class="aspect-[4/5] relative overflow-hidden">
                        <img src="https://images.unsplash.com/photo-1557170334-a9632e77c6e4?auto=format&fit=crop&q=90&w=1200" 
                             alt="Poetic ingredient close-up" 
                             class="parallax-img w-full h-[120%] object-cover grayscale hover:grayscale-0 transition-all duration-1000 -translate-y-10">
                    </div>
                </div>
            </div>

            <div class="reveal-on-scroll mt-32 max-w-4xl mx-auto text-center border-t border-black/5 dark:border-white/5 pt-20">
                <p class="font-serif italic text-xl text-luxury-stone mb-4">"The most restrained, elegant compositions I have encountered in a decade."</p>
                <span class="text-[9px] uppercase tracking-widest">— Private Collector, Paris</span>
            </div>
        </section>
        <section id="contact" class="py-32 px-8 md:px-16 reveal-on-scroll">
            <div class="max-w-2xl mx-auto text-center space-y-12">
                <span class="text-[10px] uppercase tracking-luxury text-luxury-gold">Concierge</span>
                <h3 class="font-display text-4xl uppercase tracking-widest">Inquire</h3>
        
                <form action="https://api.web3forms.com/submit" method="POST" class="space-y-8">
                    <input type="hidden" name="access_key" value="6ee93019-2192-4e0e-924b-acb84b78e8ff">
        
                    <!-- Optional: Custom subject for your received email -->
                    <input type="hidden" name="subject" value="La Bravia Inquiry – {{email}}">
        
                    <!-- Optional: Redirect to thank-you page after submit -->
                    <input type="hidden" name="redirect" value="https://your-site.com/thank-you.html">
        
                    <input 
                        type="email" 
                        name="email" 
                        placeholder="Your Email Address" 
                        required
                        class="w-full bg-transparent border-b border-luxury-stone/50 dark:border-luxury-stone/40 py-4 px-0 text-luxury-dark dark:text-luxury-offWhite placeholder-luxury-stone/70 dark:placeholder-luxury-stone/60 focus:border-luxury-gold focus:ring-0 focus:outline-none transition-all duration-300 text-center"
                    />
        
                    <button 
                        type="submit"
                        class="px-12 py-4 bg-luxury-dark dark:bg-luxury-gold text-white uppercase text-[10px] tracking-luxury hover:opacity-90 transition-opacity"
                    >
                        Send Inquiry
                    </button>
                </form>
        
                <p class="text-xs italic text-luxury-stone mt-6">Your message has been received in silence. Our team will respond within 24 hours.</p>
            </div>
        </section>
    </main>

    <!-- In collection.html, update modal transitions: -->
    <div x-show="isModalOpen" 
         class="fixed inset-0 z-[200] flex items-center justify-center p-6 md:p-16" x-cloak>
        
        <!-- Backdrop — slower fade -->
        <div x-show="isModalOpen"
             x-transition:enter="transition ease-out duration-[1.2s]"
             x-transition:enter-start="opacity-0"
             x-transition:enter-end="opacity-100"
             x-transition:leave="transition ease-in duration-[0.8s]"
             x-transition:leave-start="opacity-100"
             x-transition:leave-end="opacity-0"
             class="fixed inset-0 bg-black/96 backdrop-blur-xl" @click="closeProduct()"></div>
    
        <!-- Modal content — ceremonial reveal -->
        <article x-show="isModalOpen"
                 x-transition:enter="transition ease-out duration-[1.4s] delay-300"
                 x-transition:enter-start="opacity-0 scale-98 translate-y-12"
                 x-transition:enter-end="opacity-100 scale-100 translate-y-0"
                 x-transition:leave="transition ease-in duration-[0.6s]"
                 x-transition:leave-start="opacity-100 scale-100"
                 x-transition:leave-end="opacity-0 scale-98"
                 class="relative bg-luxury-paper dark:bg-luxury-obsidian max-w-7xl w-full grid md:grid-cols-2 h-full max-h-[88vh] overflow-hidden shadow-2xl">
            
            <!-- Close button with rotation -->
            <button @click="closeProduct()" 
                    class="absolute top-10 right-10 text-current z-[210] p-3 hover:rotate-180 transition-all duration-[0.9s] ease-out opacity-70 hover:opacity-100">
                <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="0.8">
                    <path d="M18 6L6 18M6 6l12 12"/>
                </svg>
            </button>
            
            <!-- Image side -->
            <div class="bg-luxury-canvas dark:bg-luxury-night overflow-hidden relative">
                <img :src="selectedProduct?.image" 
                     class="modal-img w-full h-full object-cover opacity-85 dark:opacity-90">
            </div>
            
            <!-- Content side — add padding for ultra-wide -->
            <div class="p-12 md:p-20 lg:p-28 flex flex-col justify-center overflow-y-auto relative max-w-2xl mx-auto">
                <header class="mb-16 modal-reveal space-y-4">
                    <span class="text-[8px] uppercase tracking-[0.5em] text-luxury-gold font-bold block" x-text="selectedProduct?.category"></span>
                    <h2 class="font-display text-5xl md:text-6xl uppercase tracking-tight leading-[0.95]" x-text="selectedProduct?.name"></h2>
                    <p class="text-luxury-stone text-3xl font-serif italic pt-4 border-t border-black/5 dark:border-white/5" x-text="'€' + selectedProduct?.price"></p>
                </header>
                
                <div class="space-y-16 modal-reveal">
                    <div>
                        <h5 class="uppercase text-[9px] tracking-[0.4em] text-luxury-stone mb-8 pb-3 border-b border-black/5 dark:border-white/5">Olfactory Narrative</h5>
                        <p class="text-xl md:text-2xl font-serif italic leading-relaxed text-luxury-dark/85 dark:text-white/75" x-text="selectedProduct?.description"></p>
                    </div>
    
                    <div class="space-y-8">
                        <h5 class="uppercase text-[9px] tracking-[0.4em] text-luxury-stone pb-3 border-b border-black/5 dark:border-white/5">The Composition</h5>
                        <div class="space-y-6">
                            <template x-for="note in selectedProduct?.notes">
                                <div class="flex items-baseline justify-between group py-2 border-b border-black/3 dark:border-white/3">
                                    <span class="text-[9px] uppercase tracking-[0.5em] text-luxury-gold w-24" x-text="note.level"></span>
                                    <span class="text-sm uppercase tracking-widest flex-1 text-right opacity-80 group-hover:opacity-100 transition-opacity duration-500" x-text="note.ingredients"></span>
                                </div>
                            </template>
                        </div>
                    </div>
                </div>
    
                <div class="mt-20 modal-reveal">
                    <button class="w-full py-7 bg-luxury-dark dark:bg-luxury-gold text-white dark:text-luxury-dark uppercase text-[9px] tracking-[0.4em] font-bold hover:tracking-[0.5em] hover:opacity-90 transition-all duration-[0.8s] ease-out">
                        Inquire with Concierge
                    </button>
                </div>
            </div>
        </article>
    </div>
    <script>
        function laBraviaApp() {
            return {
                scrolled: false,
                mobileMenu: false,
                isModalOpen: false,
                selectedProduct: null,
                darkMode: localStorage.getItem('theme') === 'dark' || 
                         (!localStorage.getItem('theme') && window.matchMedia('(prefers-color-scheme: dark)').matches),
                init() {
                    window.addEventListener('scroll', () => {
                        this.scrolled = window.pageYOffset > 50;
                    });

                    // --- GSAP ANIMATION INTEGRATION ---

                    this.initAnimations();

                    // Watch for Modal Open to Trigger Modal Specific Animations

                    // In laBraviaApp(), update modal watch:
                    this.$watch('isModalOpen', (value) => {
                        if (value) {
                            setTimeout(() => {
                                // Slower, more deliberate reveals
                                gsap.fromTo('.modal-reveal', 
                                    { y: 20, opacity: 0 },  // Was 30, too dramatic
                                    { 
                                        y: 0, 
                                        opacity: 1, 
                                        duration: 1.2,  // Was 0.8
                                        stagger: 0.15,  // Was 0.1
                                        ease: 'power2.out',  // Gentler
                                        delay: 0.5  // Was 0.3, let backdrop settle
                                    }
                                );
                    
                                gsap.fromTo('.modal-img',
                                    { scale: 1.08, opacity: 0 },  // Was 1.1
                                    { 
                                        scale: 1, 
                                        opacity: 0.85, 
                                        duration: 2,  // Was 1.5, much slower
                                        ease: 'power2.out' 
                                    }
                                );
                            }, 200);  // Was 100, give Alpine time to render
                        }
                    });
                },

                // Replace initAnimations() method with refined timing:
                initAnimations() {
                    gsap.registerPlugin(ScrollTrigger);
                
                    const prefersReducedMotion = window.matchMedia("(prefers-reduced-motion: reduce)").matches;
                    if (prefersReducedMotion) {
                        gsap.set('.hero-text, .reveal-on-scroll, .product-card', { opacity: 1 });
                        return;
                    }
                
                    // Hero — slower, more luxurious
                    gsap.to('.hero-text', {
                        y: 0,
                        opacity: 1,
                        duration: 2.2,  // Was 1.8
                        stagger: 0.3,  // Was 0.2
                        ease: 'power2.out',  // Was power3
                        delay: 0.4
                    });
                
                    // Background breathes slower
                    gsap.to('.hero-bg', {
                        scale: 1.05,  // Was 1.08, too aggressive
                        duration: 35,  // Was 25, too fast
                        repeat: -1,
                        yoyo: true,
                        ease: 'sine.inOut'
                    });
                
                    // Section reveals — gentler
                    gsap.utils.toArray('.reveal-on-scroll').forEach((elem) => {
                        gsap.fromTo(elem, 
                            { y: 60, opacity: 0 },  // Was 80, too dramatic
                            {
                                y: 0,
                                opacity: 1,
                                duration: 1.8,  // Was 1.5
                                ease: 'power2.out',  // Gentler
                                scrollTrigger: {
                                    trigger: elem,
                                    start: "top 90%",  // Earlier trigger, less abrupt
                                    toggleActions: "play none none reverse"
                                }
                            }
                        );
                    });
                
                    // Product grid — museum-like cascade
                    ScrollTrigger.batch(".product-card", {
                        onEnter: batch => gsap.fromTo(batch, 
                            { y: 40, opacity: 0 },  // Was 60, too heavy
                            { 
                                y: 0, 
                                opacity: 1, 
                                stagger: 0.2,  // Was 0.15, more breathing
                                duration: 1.6,  // Was 1.2, more luxurious
                                ease: "power2.out"  // Gentler
                            }
                        ),
                        start: "top 88%"
                    });
                
                    // Parallax — subtler
                    gsap.to(".parallax-img", {
                        yPercent: 15,  // Was 20, too aggressive
                        ease: "none",
                        scrollTrigger: {
                            trigger: ".parallax-container",
                            start: "top bottom", 
                            end: "bottom top",
                            scrub: 1.5  // Add slight smoothing
                        } 
                    });
                },

                toggleTheme() {
                    this.darkMode = !this.darkMode;
                    localStorage.setItem('theme', this.darkMode ? 'dark' : 'light');
                
                    // Very important → force Tailwind to see the change immediately
                    document.documentElement.classList.toggle('dark', this.darkMode);
                
                    // Optional but very helpful: small delay so Alpine + GSAP catch up smoothly
                    setTimeout(() => {
                        document.documentElement.classList.toggle('dark', this.darkMode);
                    }, 0);
                },

                products: [
                    { 
                        id: 1, 
                        name: "Noir Éclat", 
                        category: "Oriental / Shadow", 
                        price: "285.00", 
                        description: "A dialogue between smoke and light. A meditation on the void. This composition rests on the skin like a shadow, evolving from sharp cardamom to a deep, resinous silence.",
                        image: "https://images.unsplash.com/photo-1541643600914-78b084683601?auto=format&fit=crop&q=80&w=1200",

                        notes: [
                            { level: 'Top', ingredients: 'Cardamom, Black Tea' },
                            { level: 'Heart', ingredients: 'Indonesian Oud, Iris' },
                            { level: 'Base', ingredients: 'Vetiver, Liquid Smoke' }
                        ]
                    },

                    { 
                        id: 2, 
                        name: "Azure Bloom", 
                        category: "Floral / Ethereal", 
                        price: "195.00", 
                        description: "The stillness of a Mediterranean dawn. Soft, architectural, crystalline. It captures the fleeting moment when the sun first hits the marble terrace.",
                        image: "https://images.unsplash.com/photo-1594035910387-fea47794261f?auto=format&fit=crop&q=80&w=1200",
                        
                        notes: [
                            { level: 'Top', ingredients: 'Bergamot, Neroli' },
                            { level: 'Heart', ingredients: 'Jasmine Sambac' },
                            { level: 'Base', ingredients: 'White Musk, Salt' }
                        ]
                    },

                    { 
                        id: 3, 
                        name: "Imperial Or", 
                        category: "Gourmand / Sculptural", 
                        price: "340.00", 
                        description: "Radiant warmth. The weight of gold. An enduring silhouette. A rich, enveloping scent that feels like wrapping oneself in heavy velvet.",
                        image: "https://images.unsplash.com/photo-1523293182086-7651a899d37f?auto=format&fit=crop&q=80&w=1200",

                        notes: [
                            { level: 'Top', ingredients: 'Saffron, Honey' },
                            { level: 'Heart', ingredients: 'Vanilla Orchid' },
                            { level: 'Base', ingredients: 'Sandalwood, Amber' }
                        ]
                    }
                ],
                openMenu() { this.mobileMenu = true; document.body.classList.add('no-scroll'); },
                closeMenu() { this.mobileMenu = false; document.body.classList.remove('no-scroll'); },
                openProduct(product) { this.selectedProduct = product; this.isModalOpen = true; document.body.classList.add('no-scroll'); },
                closeProduct() { this.isModalOpen = false; setTimeout(() => { this.selectedProduct = null; document.body.classList.remove('no-scroll'); }, 400); }
            }
        }

    </script>
</body>
</html>
